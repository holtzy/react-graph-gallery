(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1880],{30953:function(e,t,n){"use strict";function r(e,t){let n;if(void 0===t)for(let t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}n.d(t,{Z:function(){return r}})},57929:function(e,t,n){"use strict";n.d(t,{PT:function(){return o},be:function(){return l}});var r=n(30953);function i(e){return e.target.depth}function o(e,t){return e.sourceLinks.length?e.depth:t-1}function l(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?(0,r.Z)(e.sourceLinks,i)-1:0}},94091:function(e,t,n){"use strict";function r(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function i(e,t){let n;if(void 0===t)for(let t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}n.d(t,{Z:function(){return p}});var o=n(30953),l=n(57929);function s(e){return function(){return e}}function a(e,t){return u(e.source,t.source)||e.index-t.index}function c(e,t){return u(e.target,t.target)||e.index-t.index}function u(e,t){return e.y0-t.y0}function f(e){return e.value}function h(e){return e.index}function d(e){return e.nodes}function y(e){return e.links}function x(e,t){let n=e.get(t);if(!n)throw Error("missing: "+t);return n}function m({nodes:e}){for(let t of e){let e=t.y0,n=e;for(let n of t.sourceLinks)n.y0=e+n.width/2,e+=n.width;for(let e of t.targetLinks)e.y1=n+e.width/2,n+=e.width}}function p(){let e,t,n=0,p=0,g=1,v=1,w=24,_=8,j,b=h,k=l.PT,L=d,N=y,A=6;function M(){let l={nodes:L.apply(null,arguments),links:N.apply(null,arguments)};return function({nodes:e,links:n}){for(let[t,n]of e.entries())n.index=t,n.sourceLinks=[],n.targetLinks=[];let r=new Map(e.map((t,n)=>[b(t,n,e),t]));for(let[e,t]of n.entries()){t.index=e;let{source:n,target:i}=t;"object"!=typeof n&&(n=t.source=x(r,n)),"object"!=typeof i&&(i=t.target=x(r,i)),n.sourceLinks.push(t),i.targetLinks.push(t)}if(null!=t)for(let{sourceLinks:n,targetLinks:r}of e)n.sort(t),r.sort(t)}(l),function({nodes:e}){for(let t of e)t.value=void 0===t.fixedValue?Math.max(r(t.sourceLinks,f),r(t.targetLinks,f)):t.fixedValue}(l),function({nodes:e}){let t=e.length,n=new Set(e),r=new Set,i=0;for(;n.size;){for(let e of n)for(let{target:t}of(e.depth=i,e.sourceLinks))r.add(t);if(++i>t)throw Error("circular link");n=r,r=new Set}}(l),function({nodes:e}){let t=e.length,n=new Set(e),r=new Set,i=0;for(;n.size;){for(let e of n)for(let{source:t}of(e.height=i,e.targetLinks))r.add(t);if(++i>t)throw Error("circular link");n=r,r=new Set}}(l),function(l){let s=function({nodes:t}){let r=i(t,e=>e.depth)+1,o=(g-n-w)/(r-1),l=Array(r);for(let e of t){let t=Math.max(0,Math.min(r-1,Math.floor(k.call(null,e,r))));e.layer=t,e.x0=n+t*o,e.x1=e.x0+w,l[t]?l[t].push(e):l[t]=[e]}if(e)for(let t of l)t.sort(e);return l}(l);j=Math.min(_,(v-p)/(i(s,e=>e.length)-1)),function(e){let n=(0,o.Z)(e,e=>(v-p-(e.length-1)*j)/r(e,f));for(let r of e){let e=p;for(let t of r)for(let r of(t.y0=e,t.y1=e+t.value*n,e=t.y1+j,t.sourceLinks))r.width=r.value*n;e=(v-e+j)/(r.length+1);for(let t=0;t<r.length;++t){let n=r[t];n.y0+=e*(t+1),n.y1+=e*(t+1)}(function(e){if(void 0===t)for(let{sourceLinks:t,targetLinks:n}of e)t.sort(c),n.sort(a)})(r)}}(s);for(let t=0;t<A;++t){let n=Math.pow(.99,t),r=Math.max(1-n,(t+1)/A);(function(t,n,r){for(let i=t.length,o=i-2;o>=0;--o){let i=t[o];for(let e of i){let t=0,r=0;for(let{target:n,value:i}of e.sourceLinks){let o=i*(n.layer-e.layer);t+=function(e,t){let n=t.y0-(t.targetLinks.length-1)*j/2;for(let{source:r,width:i}of t.targetLinks){if(r===e)break;n+=i+j}for(let{target:r,width:i}of e.sourceLinks){if(r===t)break;n-=i}return n}(e,n)*o,r+=o}if(!(r>0))continue;let i=(t/r-e.y0)*n;e.y0+=i,e.y1+=i,E(e)}void 0===e&&i.sort(u),z(i,r)}})(s,n,r),function(t,n,r){for(let i=1,o=t.length;i<o;++i){let o=t[i];for(let e of o){let t=0,r=0;for(let{source:n,value:i}of e.targetLinks){let o=i*(e.layer-n.layer);t+=function(e,t){let n=e.y0-(e.sourceLinks.length-1)*j/2;for(let{target:r,width:i}of e.sourceLinks){if(r===t)break;n+=i+j}for(let{source:r,width:i}of t.targetLinks){if(r===e)break;n-=i}return n}(n,e)*o,r+=o}if(!(r>0))continue;let i=(t/r-e.y0)*n;e.y0+=i,e.y1+=i,E(e)}void 0===e&&o.sort(u),z(o,r)}}(s,n,r)}}(l),m(l),l}function z(e,t){let n=e.length>>1,r=e[n];T(e,r.y0-j,n-1,t),S(e,r.y1+j,n+1,t),T(e,v,e.length-1,t),S(e,p,0,t)}function S(e,t,n,r){for(;n<e.length;++n){let i=e[n],o=(t-i.y0)*r;o>1e-6&&(i.y0+=o,i.y1+=o),t=i.y1+j}}function T(e,t,n,r){for(;n>=0;--n){let i=e[n],o=(i.y1-t)*r;o>1e-6&&(i.y0-=o,i.y1-=o),t=i.y0-j}}function E({sourceLinks:e,targetLinks:n}){if(void 0===t){for(let{source:{sourceLinks:e}}of n)e.sort(c);for(let{target:{targetLinks:t}}of e)t.sort(a)}}return M.update=function(e){return m(e),e},M.nodeId=function(e){return arguments.length?(b="function"==typeof e?e:s(e),M):b},M.nodeAlign=function(e){return arguments.length?(k="function"==typeof e?e:s(e),M):k},M.nodeSort=function(t){return arguments.length?(e=t,M):e},M.nodeWidth=function(e){return arguments.length?(w=+e,M):w},M.nodePadding=function(e){return arguments.length?(_=j=+e,M):_},M.nodes=function(e){return arguments.length?(L="function"==typeof e?e:s(e),M):L},M.links=function(e){return arguments.length?(N="function"==typeof e?e:s(e),M):N},M.linkSort=function(e){return arguments.length?(t=e,M):t},M.size=function(e){return arguments.length?(n=p=0,g=+e[0],v=+e[1],M):[g-n,v-p]},M.extent=function(e){return arguments.length?(n=+e[0][0],g=+e[1][0],p=+e[0][1],v=+e[1][1],M):[[n,p],[g,v]]},M.iterations=function(e){return arguments.length?(A=+e,M):A},M}},4127:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=Math.PI,i=2*r,o=i-1e-6;function l(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function s(){return new l}l.prototype=s.prototype={constructor:l,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,i,o){e=+e,t=+t,n=+n,i=+i,o=+o;var l=this._x1,s=this._y1,a=n-e,c=i-t,u=l-e,f=s-t,h=u*u+f*f;if(o<0)throw Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>1e-6){if(Math.abs(f*a-c*u)>1e-6&&o){var d=n-l,y=i-s,x=a*a+c*c,m=Math.sqrt(x),p=Math.sqrt(h),g=o*Math.tan((r-Math.acos((x+h-(d*d+y*y))/(2*m*p)))/2),v=g/p,w=g/m;Math.abs(v-1)>1e-6&&(this._+="L"+(e+v*u)+","+(t+v*f)),this._+="A"+o+","+o+",0,0,"+ +(f*d>u*y)+","+(this._x1=e+w*a)+","+(this._y1=t+w*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t)}},arc:function(e,t,n,l,s,a){e=+e,t=+t,n=+n,a=!!a;var c=n*Math.cos(l),u=n*Math.sin(l),f=e+c,h=t+u,d=1^a,y=a?l-s:s-l;if(n<0)throw Error("negative radius: "+n);null===this._x1?this._+="M"+f+","+h:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+f+","+h),n&&(y<0&&(y=y%i+i),y>o?this._+="A"+n+","+n+",0,1,"+d+","+(e-c)+","+(t-u)+"A"+n+","+n+",0,1,"+d+","+(this._x1=f)+","+(this._y1=h):y>1e-6&&(this._+="A"+n+","+n+",0,"+ +(y>=r)+","+d+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=t+n*Math.sin(s))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var a=Array.prototype.slice;function c(e){return function(){return e}}function u(e){return e[0]}function f(e){return e[1]}function h(e){return e.source}function d(e){return e.target}function y(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function x(e){return[e.source.x1,e.y0]}function m(e){return[e.target.x0,e.y1]}function p(){return(function(e){var t=h,n=d,r=u,i=f,o=null;function l(){var l,c=a.call(arguments),u=t.apply(this,c),f=n.apply(this,c);if(o||(o=l=s()),e(o,+r.apply(this,(c[0]=u,c)),+i.apply(this,c),+r.apply(this,(c[0]=f,c)),+i.apply(this,c)),l)return o=null,l+""||null}return l.source=function(e){return arguments.length?(t=e,l):t},l.target=function(e){return arguments.length?(n=e,l):n},l.x=function(e){return arguments.length?(r="function"==typeof e?e:c(+e),l):r},l.y=function(e){return arguments.length?(i="function"==typeof e?e:c(+e),l):i},l.context=function(e){return arguments.length?(o=null==e?null:e,l):o},l})(y).source(x).target(m)}},76801:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/example/sankey-bump-chart",function(){return n(73591)}])},61651:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(85893);n(67294);var i=n(49871),o=n(28843),l=n(77522);let s={distribution:"Distribution",correlation:"Correlation",ranking:"Ranking",partOfAWhole:"Part Of A Whole",evolution:"Evolution",map:"Map",flow:"Flow",general:"General Knowledge"};function a(e){let{chartFamily:t}=e,n=o.c.filter(e=>e.family===t).map((e,t)=>{let n=(0,l.y)(e.reactURL);return(0,r.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,r.jsx)(i.Z,{link:n,chartLogo:e.logo,caption:e.label,isAvailable:e.isAvailable,size:122})},t)});return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:t+"  mt-4 text-md border-b mb-2 border-gray-100 tracking-wider",children:null==s?void 0:s[t]}),(0,r.jsx)("div",{className:"flex flex-row justify-start flex-wrap",children:n})]})}},81122:function(e,t,n){"use strict";n.d(t,{$:function(){return c}});var r=n(85893),i=n(67294),o=n(59973),l=n(80615),s=n(88578),a=n(5);let c=e=>{let{VizComponent:t,vizName:n,height:c=400,maxWidth:u=800,caption:f,fileToOpen:h}=e,[d,y]=(0,i.useState)(!1),x=(0,i.useRef)(null),m=(0,o.B)(x);return(0,r.jsx)("div",{style:{marginLeft:"-50vw",left:"50%"},className:"my-4 py-4 w-screen relative",children:d?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,r.jsx)("div",{style:{maxWidth:2e3},className:"w-full z-50",children:(0,r.jsx)(s.X,{vizName:n,fileToOpen:h})}),(0,r.jsx)("div",{className:"flex justify-center mt-2",children:(0,r.jsx)(a.z,{size:"sm",onClick:()=>y(!d),children:"Hide Sandbox"})})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)("div",{className:"bg-gray-100 bg-opacity-50 w-screen flex justify-center z-50 pointer-events-none",children:(0,r.jsx)("div",{style:{height:c,width:"100%",maxWidth:u},ref:x,className:"pointer-events-auto",children:(0,r.jsx)(t,{height:c,width:m.width})})}),(0,r.jsx)(l.Y,{children:f}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(a.z,{size:"sm",onClick:()=>y(!d),children:"Show code"})})]})})}},88578:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(85893);n(67294);let i=e=>{let{vizName:t,height:n="500px",fileToOpen:i}=e;return console.log("rerendeeeerrrrr"),(0,r.jsx)("iframe",{src:"https://codesandbox.io/embed/github/holtzy/react-graph-gallery/tree/main/viz/"+t+"?fontsize=14&hidenavigation=1&theme=dark&expanddevtools=0&view=split"+(i?"&module=/".concat(i):""),style:{width:"100%",height:n,border:"solid",borderWidth:2,borderRadius:"4px",overflow:"hidden"},allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"})}},80153:function(e,t,n){"use strict";n.d(t,{A:function(){return h}});var r=n(85893),i=n(49700),o=n(63476),l=n(67294),s=n(63084),a=n.n(s);function c(){let[e,t]=(0,l.useState)([]),[n,i]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let e=Array.from(document.querySelectorAll("h2"));t(e)},[]),(0,l.useEffect)(()=>{let t=()=>{let t=e.map(e=>e.offsetTop-e.scrollTop+e.clientTop),n=window.scrollY+150,r=t.reduce((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e,0),o=t.findIndex(e=>e===r);i(-1===o?0:o)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[e]),(0,r.jsx)("div",{className:a().tableOfContent,children:e.map((t,i)=>(0,r.jsx)("p",{className:n===i?"".concat(a().tocItem," ").concat(a().tocItemActive):a().tocItem,onClick:t=>{t.preventDefault(),e[i].scrollIntoView({behavior:"smooth",block:"start",alignToTop:!0})},children:t.id.charAt(0).toUpperCase()+t.id.slice(1)},t.id))})}var u=n(17414),f=n(62594);let h=e=>{let{children:t,title:n,seoDescription:l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.A,{title:n,seoDescription:l}),(0,r.jsx)(i.Z,{}),(0,r.jsx)("div",{className:"wrapper",children:t}),(0,r.jsx)(f.Z,{}),(0,r.jsx)("div",{className:"wrapper",children:(0,r.jsx)(o.Z,{})}),(0,r.jsx)(c,{})]})}},49871:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(85893);n(67294);var i=n(95887),o=n(28843),l=n(41664),s=n.n(l);let a=o.c.filter(e=>"general"===e.family).map(e=>e.logo);function c(e){let{chartLogo:t,caption:n,link:o,isAvailable:l,size:c}=e,f=a.includes(t),h=l?"opacity-100":"opacity-20";return(0,r.jsx)(s(),{href:l?o:"subscribe",className:"no-underline",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsxs)("div",{style:{width:c,height:c},className:"relative mr-2 rounded-full "+h+" "+(l?"cursor-pointer":"cursor-not-allowed"),children:[(0,r.jsx)("div",{className:"absolute",children:(0,r.jsx)(i.Z,{chartLogo:t,size:c})}),f?(0,r.jsx)("div",{className:"absolute opacity-0 hover:opacity-60 flex items-center justify-center w-full h-full z-30",children:(0,r.jsx)(u,{size:c})}):(0,r.jsx)("div",{style:{backgroundColor:"var(--react-gallery)"},className:"opacity-0 hover:opacity-60 flex items-center justify-center w-full h-full rounded-full  z-30",children:(0,r.jsx)("span",{className:"text-white text-4xl",children:"+"})})]}),(0,r.jsx)("p",{className:"font-light text-sm text-gray-600 "+h,children:n})]})})}let u=e=>{let{size:t}=e;return(0,r.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 100 100",className:"fill-current text-purple-800",children:(0,r.jsx)("path",{d:"M50,0 L100,20 L100,80 L50,100 L0,80 L0,20 Z"})})}},80615:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var r=n(85893);let i=e=>{let{children:t}=e;return(0,r.jsx)("p",{className:"text-sm text-gray-500 max-w-xs italic text-center mt-4 font-light",children:t})}},59973:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});var r=n(67294);let i=e=>{let t=()=>({width:e.current?e.current.offsetWidth:0,height:e.current?e.current.offsetHeight:0}),[n,i]=(0,r.useState)(t),o=()=>{i(t())};return(0,r.useEffect)(()=>(window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)),[]),(0,r.useEffect)(()=>{o()},[e]),n}},73591:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(85893);n(67294);var i=n(80153),o=n(43710),l=n(61651),s=n(81122);let a=[{year:1900,name:"Amanda",value:253},{year:1950,name:"Amanda",value:1e3},{year:2e3,name:"Amanda",value:200},{year:1900,name:"Jay",value:12},{year:1950,name:"Jay",value:9},{year:2e3,name:"Jay",value:99},{year:1900,name:"Tom",value:87},{year:1950,name:"Tom",value:82},{year:2e3,name:"Tom",value:12},{year:1900,name:"Xin",value:83},{year:1950,name:"Xin",value:24},{year:2e3,name:"Xin",value:12}];var c=n(94091),u=n(57929),f=n(4127),h=n(72313);let d=(0,h.PKp)().domain(["Amanda","Jay","Tom","Xin"]).range(["#e0ac2b","#e85252","#6689c6","#9a6fb0"]),y=e=>{let{width:t,height:n,data:i}=e,o=x(i);console.log("nodeAndLinksData",o);let l=(0,c.Z)().nodeWidth(26).nodePadding(29).nodeSort((e,t)=>(console.log("node1",e),e.value>t.value?-1:1)).extent([[5,25],[t-5,n-25]]).nodeId(e=>e.id).nodeAlign(u.be),{nodes:s,links:a}=l(o),h=s.map(e=>(console.log("---",e),(0,r.jsx)("g",{children:(0,r.jsx)("rect",{height:e.y1-e.y0,width:l.nodeWidth(),x:e.x0,y:e.y0,stroke:"black",fill:d(String(e.index).split("_")[0]),fillOpacity:.8,rx:.9})},e.index))),y=a.map((e,t)=>{let n=(0,f.Z)(),i=n(e);return(0,r.jsx)("path",{d:i,stroke:"#a53253",fill:"none",strokeOpacity:.1,strokeWidth:e.width},t)});return(0,r.jsx)("div",{children:(0,r.jsxs)("svg",{width:t,height:n,children:[h,y]})})},x=e=>{let t=[],n=[],r={};for(let i in e.forEach(e=>{let n="".concat(e.name,"_").concat(e.year);t.push({id:n,value:e.value}),r[e.name]||(r[e.name]=[]),r[e.name].push(n)}),r){let e=r[i];for(let t=0;t<e.length-1;t++)n.push({source:e[t],target:e[t+1],value:2})}return console.log("***",t),{nodes:t,links:n}},m=e=>{let{width:t=700,height:n=400}=e;return 0===t?null:(0,r.jsx)(y,{data:a,width:t,height:n})};var p=n(56438);let g=(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("p",{children:"A Sankey bump chart is a variation around the bump chart"})});function v(){return(0,r.jsxs)(i.A,{title:"How to build a vertical arc diagram with React and D3.js.",seoDescription:"A step-by-step guide to build an arc diagram. Comes with explanations, code sandboxes, and ready-to-use templates.",children:[(0,r.jsx)(o.Z,{title:"Sankey Bump Chart",description:g,chartType:"sankey"}),(0,r.jsx)("h2",{id:"plot",children:"Plot and code"}),(0,r.jsx)("p",{children:"If you are in a hurry, here is the final plot we're trying to achieve here, together with its code:\uD83D\uDE47‍♂️"}),(0,r.jsx)("p",{children:"TODO"}),(0,r.jsx)(p.J,{isFilled:!0,size:"sm",href:"/sankey",children:"Sankey Diagram section"}),(0,r.jsx)(s.$,{vizName:"SankeyBumpChart",VizComponent:m,maxWidth:500,height:500,caption:"A Sankey Bump chart"}),(0,r.jsx)("div",{className:"full-bleed border-t h-0 bg-gray-100 mb-3 mt-24"}),(0,r.jsx)(l.Z,{chartFamily:"flow"}),(0,r.jsx)("div",{className:"mt-20"})]})}},63084:function(e){e.exports={tableOfContent:"table-of-content_tableOfContent__jj0Ai",tocItem:"table-of-content_tocItem__osS9X",tocItemActive:"table-of-content_tocItemActive__CGMTh"}}},function(e){e.O(0,[2343,7754,2313,8190,3710,2594,9774,2888,179],function(){return e(e.s=76801)}),_N_E=e.O()}]);