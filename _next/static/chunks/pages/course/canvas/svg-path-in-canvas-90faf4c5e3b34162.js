(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5679],{4896:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/course/canvas/svg-path-in-canvas",function(){return n(6740)}])},81122:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var a=n(85893),r=n(67294),s=n(59973),i=n(80615),l=n(88578),c=n(5);let o=e=>{let{VizComponent:t,vizName:n,height:o=400,maxWidth:d=800,caption:h,fileToOpen:u}=e,[x,f]=(0,r.useState)(!1),p=(0,r.useRef)(null),m=(0,s.B)(p);return(0,a.jsx)("div",{style:{marginLeft:"-50vw",left:"50%"},className:"my-4 py-4 w-screen relative",children:x?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,a.jsx)("div",{style:{maxWidth:2e3},className:"w-full z-50",children:(0,a.jsx)(l.X,{vizName:n,fileToOpen:u})}),(0,a.jsx)("div",{className:"flex justify-center mt-2",children:(0,a.jsx)(c.z,{size:"sm",onClick:()=>f(!x),children:"Hide Sandbox"})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"bg-gray-100 bg-opacity-50 w-screen flex justify-center z-50 pointer-events-none",children:(0,a.jsx)("div",{style:{height:o,width:"100%",maxWidth:d},ref:p,className:"pointer-events-auto",children:(0,a.jsx)(t,{height:o,width:m.width})})}),(0,a.jsx)(i.Y,{children:h}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(c.z,{size:"sm",onClick:()=>f(!x),children:"Show code"})})]})})}},88578:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var a=n(85893);n(67294);let r=e=>{let{vizName:t,height:n="500px",fileToOpen:r}=e;return console.log("rerendeeeerrrrr"),(0,a.jsx)("iframe",{src:"https://codesandbox.io/embed/github/holtzy/react-graph-gallery/tree/main/viz/"+t+"?fontsize=14&hidenavigation=1&theme=dark&expanddevtools=0&view=split"+(r?"&module=/".concat(r):""),style:{width:"100%",height:n,border:"solid",borderWidth:2,borderRadius:"4px",overflow:"hidden"},allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"})}},41843:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var a=n(85893),r=n(49700),s=n(63476),i=n(17414),l=n(41664),c=n.n(l);let o=e=>{let{children:t,title:n,seoDescription:l,previousTocItem:o,nextTocItem:d}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{title:n,seoDescription:l}),(0,a.jsx)(r.Z,{}),(0,a.jsx)("div",{className:"wrapper",children:t}),(0,a.jsxs)("div",{className:"flex justify-center items-center space-x-6 my-24 py-12  bg-muted/50",children:[o?(0,a.jsxs)(c(),{href:o.link,className:"text-gray-500 no-underline flex flex-col justify-start items-end w-96 h-32 border-r border-black  p-8 hover:bg-muted ",children:[(0,a.jsx)("span",{className:"uppercase font-light text-transparent bg-gradient-to-l to-fuchsia-300 from-blue-400 bg-clip-text",children:"← Previous"}),(0,a.jsx)("p",{children:o.name})]}):(0,a.jsx)("div",{className:"w-96"}),d&&(0,a.jsxs)(c(),{href:d.link,className:"text-gray-500 no-underline flex flex-col justify-start w-96 h-32 border-l border-black  p-8 hover:bg-muted ",children:[(0,a.jsx)("span",{className:"uppercase font-light text-transparent bg-gradient-to-l from-fuchsia-300 to-blue-400 bg-clip-text",children:"Next →"}),(0,a.jsx)("p",{children:d.name})]})]}),(0,a.jsx)("div",{className:"wrapper",children:(0,a.jsx)(s.Z,{})})]})}},72182:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var a=n(85893);let r=e=>{let{children:t}=e;return(0,a.jsx)("span",{className:"font-semibol bg-purple-100 p-1",children:t})}},80615:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var a=n(85893);let r=e=>{let{children:t}=e;return(0,a.jsx)("p",{className:"text-sm text-gray-500 max-w-xs italic text-center mt-4 font-light",children:t})}},3572:function(e,t,n){"use strict";n.d(t,{d:function(){return d}});var a=n(85893),r=n(32581),s=n(15660),i=n.n(s),l=n(67294),c=n(45993),o=n.n(c);let d=e=>{let{code:t}=e,[n,s]=(0,l.useState)(!1),c=(0,l.useRef)(null);(0,l.useEffect)(()=>{c.current&&i().highlightElement(c.current)},[c,t]);let d=(0,a.jsx)("div",{onClick:()=>{navigator.clipboard.writeText(t),s(!0)},className:o().codeChunckCopyButton,children:n?"Copied":(0,a.jsx)(r.Z,{size:14,style:{padding:0}})});return(0,a.jsxs)("div",{className:"mb-6 relative",children:[(0,a.jsx)("pre",{className:"rounded-md line-numbers",children:(0,a.jsx)("code",{ref:c,className:"language-javascript",children:t})}),(0,a.jsx)("div",{className:o().copyButtonContainer,children:d})]})}},59973:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var a=n(67294);let r=e=>{let t=()=>({width:e.current?e.current.offsetWidth:0,height:e.current?e.current.offsetHeight:0}),[n,r]=(0,a.useState)(t),s=()=>{r(t())};return(0,a.useEffect)(()=>(window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[]),(0,a.useEffect)(()=>{s()},[e]),n}},6740:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var a=n(85893),r=n(67294),s=n(43710),i=n(41843),l=n(11236),c=n(41664),o=n.n(c),d=n(81122),h=n(3572),u=n(38503),x=n(72182);let f=[{x:1,y:90},{x:2,y:12},{x:3,y:34},{x:4,y:53},{x:5,y:52},{x:6,y:9},{x:7,y:18},{x:8,y:78},{x:9,y:28},{x:10,y:34}];var p=n(2354);let m=e=>{let{width:t,height:n,data:s}=e,i=(0,r.useRef)(null),l=t-30-50,c=n-30-50,o=p.Fp7(s,e=>e.y),d=p.BYU().domain([0,o||0]).range([c,0]),[h,u]=p.Wem(s,e=>e.x),x=p.BYU().domain([h||0,u||0]).range([0,l]),f=p.SOn().x(e=>x(e.x)).y1(e=>d(e.y)).y0(d(0)),m=f(s);return(0,r.useEffect)(()=>{let e=i.current;if(!e)return;let t=e.getContext("2d");if(t&&(t.clearRect(0,0,e.width,e.height),m)){let e=new Path2D(m);t.fillStyle="#9a6fb0",t.globalAlpha=.4,t.fill(e)}},[s,t,n]),(0,a.jsx)("canvas",{ref:i,width:t,height:n})},j=e=>{let{width:t=700,height:n=400}=e;return(0,a.jsx)(m,{data:f,width:t,height:n})},g=[{name:"Mark",value:90},{name:"Robert",value:12},{name:"Emily",value:34},{name:"Marion",value:53},{name:"Nicolas",value:98}],y=["#e0ac2b","#e85252","#6689c6","#9a6fb0","#a53253","#69b3a2"],v=e=>{let{width:t,height:n,data:s}=e,i=(0,r.useRef)(null),l=Math.min(t,n)/2-30,c=p.ve8().value(e=>e.value),o=c(s),d=p.Nb1(),h=o.map(e=>d({innerRadius:70,outerRadius:l,startAngle:e.startAngle,endAngle:e.endAngle}));return(0,r.useEffect)(()=>{let e=i.current;if(e){let a=e.getContext("2d");a&&(a.clearRect(0,0,t,n),a.translate(t/2,n/2),h.forEach((e,t)=>{let n=new Path2D(e);a.fillStyle=y[t%y.length],a.fill(n)}))}},[s,t,n]),(0,a.jsx)("canvas",{ref:i,width:t,height:n})},w=e=>{let{width:t=700,height:n=400}=e;return(0,a.jsx)(v,{data:g,width:t,height:n})};function b(){let e=l.Y.find(e=>"/course/canvas/svg-path-in-canvas"===e.link);return e?(0,a.jsxs)(i.p,{title:e.name,seoDescription:"",nextTocItem:l.Y.find(e=>"/course/canvas/hover-effect"===e.link),previousTocItem:l.Y.find(e=>"/course/canvas/combining-svg-and-canvas"===e.link),children:[(0,a.jsx)(s.Z,{title:e.name,lessonStatus:e.status,readTime:e.readTime,selectedLesson:e,description:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["We've seen how powerful D3 is for transforming a dataset into an SVG ",(0,a.jsx)("code",{children:"path"}),". For example, give it a radius and angle, and it can easily generate an arc path."]}),(0,a.jsx)("p",{children:"But how can we use this same data to draw the shape with canvas? Let’s explore."})]})}),(0,a.jsx)("h2",{children:"Remember the area chart?"}),(0,a.jsxs)("p",{children:["Before we start using canvas, let's remind quickly how to build an"," ",(0,a.jsx)(o(),{href:"/area-plot",children:"area chart"})," with react and d3."]}),(0,a.jsx)("p",{children:"Everything starts with a dataset."}),(0,a.jsx)(h.d,{code:"\nconst data = [\n  {x:1, y: 90},\n  {x: 2, y: 12},\n  {x: 3, y: 34},\n  {x: 4, y: 53},\n  {x: 5, y: 98},\n]\n".trim()}),(0,a.jsxs)("p",{children:["Then, ",(0,a.jsx)("code",{children:"d3.area()"})," is used to create an area generator. This generator (called ",(0,a.jsx)("code",{children:"areaBuilder"})," below) transforms a blob of data into a ",(0,a.jsx)("code",{children:"string"})," that can be used as the ",(0,a.jsx)("code",{children:"d"})," ","argument of a ",(0,a.jsx)("code",{children:"path"})," SVG shape."]}),(0,a.jsx)(h.d,{code:"\n// create a shape generator.\n// areaBuilder will be a function that takes data as input and returns a SVG path\nconst areaBuilder = d3\n  .area()\n  .x(d => xScale(d.x))\n  .y1(d => yScale(d.y))\n  .y0(yScale(0));\n\n// call the function with the dataset\nconst areaPath = areaBuilder(data);\n// M0,0 L57.778,277.333 L115.556,199.111 ... Z\n".trim()}),(0,a.jsxs)("p",{children:["The output ",(0,a.jsx)("code",{children:"areaPath"})," can now be passed to a"," ",(0,a.jsx)("code",{children:"path"})," SVG element!"]}),(0,a.jsx)(h.d,{code:'\n<path d={areaPath} fill="#9a6fb0" />\n'.trim()}),(0,a.jsx)("p",{children:"It results in a cool area chart:"}),(0,a.jsx)(d.$,{vizName:"AreaChartBasic",VizComponent:u.N,height:400,maxWidth:600,caption:(0,a.jsxs)("p",{children:["A very basic area chart made using react and the ",(0,a.jsx)("code",{children:"area()"})," ","function of d3.js"]})}),(0,a.jsx)("h2",{children:"\uD83D\uDE1E The Problem"}),(0,a.jsxs)("p",{children:["D3 does an amazing job here! It transforms our dataset into a string like ",(0,a.jsx)("code",{children:"M0,0 L57,277 L115,199 ... Z"}),", which we can directly pass to an SVG ",(0,a.jsx)("code",{children:"path"})," element. \uD83D\uDC4F"]}),(0,a.jsxs)("p",{children:["But how can we use this path data to"," ",(0,a.jsx)(x.b,{children:"draw on a canvas instead of SVG"}),"?"]}),(0,a.jsxs)("h2",{children:[(0,a.jsx)("code",{children:"Path2D"})," to the rescue! \uD83C\uDF7E"]}),(0,a.jsxs)("p",{children:["Luckily, there's a lifesaving feature in the Canvas API:"," ",(0,a.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/Path2D",children:"Path2D"}),"."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("code",{children:"Path2D"})," allows you to take any SVG path string and easily draw it on the canvas. It simplifies the process considerably:"]}),(0,a.jsx)(h.d,{code:"\n// areaPath is computed with d3: M0,0 L57.778,277.333 L115.556,199.111 ... Z\n\n// Then in the useEffect:\nconst ctx = canvas.getContext('2d');\nconst path = new Path2D(areaPath); // Convert to Path2D\nctx.fill(path); // Now you can fill or stroke the path\n\n".trim()}),(0,a.jsx)("p",{children:"Let's see it in action on a full chart:"}),(0,a.jsx)(d.$,{vizName:"AreaChartCanvas",VizComponent:j,height:400,maxWidth:600,caption:(0,a.jsxs)("p",{children:["A minimal area chart made in canvas thanks to ",(0,a.jsx)("code",{children:"d3.area()"})," ","and ",(0,a.jsx)("code",{children:"Path2D"})]})}),(0,a.jsx)("h2",{children:"Too easy!"}),(0,a.jsx)("p",{children:"That makes it a breeze!"}),(0,a.jsx)("p",{children:"Let's try on a donut chart to see if it works the same:"}),(0,a.jsx)(d.$,{vizName:"DonutChartCanvas",VizComponent:w,height:400,maxWidth:600,caption:(0,a.jsx)("p",{children:"A minimal donut chart made in canvas"})})]}):null}},38503:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var a=n(85893);let r=[{x:1,y:90},{x:2,y:12},{x:3,y:34},{x:4,y:53},{x:5,y:52},{x:6,y:9},{x:7,y:18},{x:8,y:78},{x:9,y:28},{x:10,y:34}];var s=n(67294),i=n(2354);let l={top:30,right:30,bottom:50,left:50},c=e=>{let{width:t,height:n,data:r}=e,c=(0,s.useRef)(null),o=t-l.right-l.left,d=n-l.top-l.bottom,[h,u]=i.Wem(r,e=>e.y),x=(0,s.useMemo)(()=>i.BYU().domain([0,u||0]).range([d,0]),[r,n]),[f,p]=i.Wem(r,e=>e.x),m=(0,s.useMemo)(()=>i.BYU().domain([f||0,p||0]).range([0,o]),[r,t]);(0,s.useEffect)(()=>{let e=i.Ys(c.current);e.selectAll("*").remove();let t=i.LLu(m);e.append("g").attr("transform","translate(0,"+d+")").call(t);let n=i.y4O(x);e.append("g").call(n)},[m,x,d]);let j=i.SOn().x(e=>m(e.x)).y1(e=>x(e.y)).y0(x(0)),g=j(r),y=i.jvg().x(e=>m(e.x)).y(e=>x(e.y)),v=y(r);return v&&g?(0,a.jsx)("div",{children:(0,a.jsxs)("svg",{width:t,height:n,children:[(0,a.jsxs)("g",{width:o,height:d,transform:"translate(".concat([l.left,l.top].join(","),")"),children:[(0,a.jsx)("path",{d:g,opacity:1,stroke:"none",fill:"#9a6fb0",fillOpacity:.4}),(0,a.jsx)("path",{d:v,opacity:1,stroke:"#9a6fb0",fill:"none",strokeWidth:2})]}),(0,a.jsx)("g",{width:o,height:d,ref:c,transform:"translate(".concat([l.left,l.top].join(","),")")})]})}):null},o=e=>{let{width:t=700,height:n=400}=e;return(0,a.jsx)(c,{data:r,width:t,height:n})}},45993:function(e){e.exports={codeChunckCopyButton:"code-block_codeChunckCopyButton__yPrL_",copyButtonContainer:"code-block_copyButtonContainer__BrX9E"}}},function(e){e.O(0,[2343,7754,2354,7823,8190,3710,9774,2888,179],function(){return e(e.s=4896)}),_N_E=e.O()}]);