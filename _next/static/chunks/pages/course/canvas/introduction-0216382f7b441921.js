(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{9572:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/course/canvas/introduction",function(){return n(33592)}])},81122:function(e,t,n){"use strict";n.d(t,{$:function(){return c}});var s=n(85893),r=n(67294),i=n(59973),a=n(80615),l=n(88578),o=n(5);let c=e=>{let{VizComponent:t,vizName:n,height:c=400,maxWidth:h=800,caption:d,fileToOpen:u}=e,[x,p]=(0,r.useState)(!1),f=(0,r.useRef)(null),m=(0,i.B)(f);return(0,s.jsx)("div",{style:{marginLeft:"-50vw",left:"50%"},className:"my-4 py-4 w-screen relative",children:x?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,s.jsx)("div",{style:{maxWidth:2e3},className:"w-full z-50",children:(0,s.jsx)(l.X,{vizName:n,fileToOpen:u})}),(0,s.jsx)("div",{className:"flex justify-center mt-2",children:(0,s.jsx)(o.z,{size:"sm",onClick:()=>p(!x),children:"Hide Sandbox"})})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{className:"bg-gray-100 bg-opacity-50 w-screen flex justify-center z-50 pointer-events-none",children:(0,s.jsx)("div",{style:{height:c,width:"100%",maxWidth:h},ref:f,className:"pointer-events-auto",children:(0,s.jsx)(t,{height:c,width:m.width})})}),(0,s.jsx)(a.Y,{children:d}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(o.z,{size:"sm",onClick:()=>p(!x),children:"Show code"})})]})})}},88578:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var s=n(85893);n(67294);let r=e=>{let{vizName:t,height:n="500px",fileToOpen:r}=e;return console.log("rerendeeeerrrrr"),(0,s.jsx)("iframe",{src:"https://codesandbox.io/embed/github/holtzy/react-graph-gallery/tree/main/viz/"+t+"?fontsize=14&hidenavigation=1&theme=dark&expanddevtools=0&view=split"+(r?"&module=/".concat(r):""),style:{width:"100%",height:n,border:"solid",borderWidth:2,borderRadius:"4px",overflow:"hidden"},allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"})}},41843:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var s=n(85893),r=n(49700),i=n(63476),a=n(17414),l=n(41664),o=n.n(l);let c=e=>{let{children:t,title:n,seoDescription:l,previousTocItem:c,nextTocItem:h}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A,{title:n,seoDescription:l}),(0,s.jsx)(r.Z,{}),(0,s.jsx)("div",{className:"wrapper",children:t}),(0,s.jsxs)("div",{className:"flex justify-center items-center space-x-6 my-24 py-12  bg-muted/50",children:[c?(0,s.jsxs)(o(),{href:c.link,className:"text-gray-500 no-underline flex flex-col justify-start items-end w-96 h-32 border-r border-black  p-8 hover:bg-muted ",children:[(0,s.jsx)("span",{className:"uppercase font-light text-transparent bg-gradient-to-l to-fuchsia-300 from-blue-400 bg-clip-text",children:"← Previous"}),(0,s.jsx)("p",{children:c.name})]}):(0,s.jsx)("div",{className:"w-96"}),h&&(0,s.jsxs)(o(),{href:h.link,className:"text-gray-500 no-underline flex flex-col justify-start w-96 h-32 border-l border-black  p-8 hover:bg-muted ",children:[(0,s.jsx)("span",{className:"uppercase font-light text-transparent bg-gradient-to-l from-fuchsia-300 to-blue-400 bg-clip-text",children:"Next →"}),(0,s.jsx)("p",{children:h.name})]})]}),(0,s.jsx)("div",{className:"wrapper",children:(0,s.jsx)(i.Z,{})})]})}},72182:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var s=n(85893);let r=e=>{let{children:t}=e;return(0,s.jsx)("span",{className:"font-semibol bg-purple-100 p-1",children:t})}},80615:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var s=n(85893);let r=e=>{let{children:t}=e;return(0,s.jsx)("p",{className:"text-sm text-gray-500 max-w-xs italic text-center mt-4 font-light",children:t})}},3572:function(e,t,n){"use strict";n.d(t,{d:function(){return h}});var s=n(85893),r=n(32581),i=n(15660),a=n.n(i),l=n(67294),o=n(45993),c=n.n(o);let h=e=>{let{code:t}=e,[n,i]=(0,l.useState)(!1),o=(0,l.useRef)(null);(0,l.useEffect)(()=>{o.current&&a().highlightElement(o.current)},[o,t]);let h=(0,s.jsx)("div",{onClick:()=>{navigator.clipboard.writeText(t),i(!0)},className:c().codeChunckCopyButton,children:n?"Copied":(0,s.jsx)(r.Z,{size:14,style:{padding:0}})});return(0,s.jsxs)("div",{className:"mb-6 relative",children:[(0,s.jsx)("pre",{className:"rounded-md line-numbers",children:(0,s.jsx)("code",{ref:o,className:"language-javascript",children:t})}),(0,s.jsx)("div",{className:c().copyButtonContainer,children:h})]})}},59973:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var s=n(67294);let r=e=>{let t=()=>({width:e.current?e.current.offsetWidth:0,height:e.current?e.current.offsetHeight:0}),[n,r]=(0,s.useState)(t),i=()=>{r(t())};return(0,s.useEffect)(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)),[]),(0,s.useEffect)(()=>{i()},[e]),n}},33592:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(85893),r=n(67294),i=n(43710),a=n(41843),l=n(11236),o=n(81122),c=n(88578);let h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=[];for(let n=0;n<e;n++){let e=10*Math.random(),n=5+4*Math.sin(e)+5*(Math.random()-.1);t.push({x:e,y:n})}return t}();var d=n(78995);let u=e=>{let{yScale:t,pixelsPerTick:n,width:i}=e,a=t.range(),l=(0,r.useMemo)(()=>{let e=a[0]-a[1];return t.ticks(Math.floor(e/n)).map(e=>({value:e,yOffset:t(e)}))},[t]);return(0,s.jsx)(s.Fragment,{children:l.map(e=>{let{value:t,yOffset:n}=e;return(0,s.jsxs)("g",{transform:"translate(0, ".concat(n,")"),shapeRendering:"crispEdges",children:[(0,s.jsx)("line",{x1:-10,x2:i+10,stroke:"#D2D7D3",strokeWidth:.5}),(0,s.jsx)("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-20px)",fill:"#D2D7D3"},children:t},t)]},t)})})},x=e=>{let{xScale:t,pixelsPerTick:n,height:i}=e,a=t.range(),l=(0,r.useMemo)(()=>{let e=a[1]-a[0];return t.ticks(Math.floor(e/n)).map(e=>({value:e,xOffset:t(e)}))},[t]);return(0,s.jsx)(s.Fragment,{children:l.map(e=>{let{value:t,xOffset:n}=e;return(0,s.jsxs)("g",{transform:"translate(".concat(n,", 0)"),shapeRendering:"crispEdges",children:[(0,s.jsx)("line",{y1:10,y2:-i-10,stroke:"#D2D7D3",strokeWidth:.5}),(0,s.jsx)("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)",fill:"#D2D7D3"},children:t},t)]},t)})})},p={top:60,right:60,bottom:60,left:60},f=e=>{let{width:t,height:n,data:i}=e,a=t-p.right-p.left,l=n-p.top-p.bottom,[o,c]=(0,r.useState)(null),h=d.BYU().domain([0,16]).range([l,0]),f=d.BYU().domain([0,10]).range([0,a]),m=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=m.current;if(!e)return;let s=e.getContext("2d");s.clearRect(0,0,t,n),i.forEach(e=>{s.beginPath(),s.arc(f(e.x),h(e.y),1,0,2*Math.PI),s.globalAlpha=.5,s.fillStyle="#cb1dd1",s.fill()})},[i,f,h,t,n]),(0,s.jsx)("div",{style:{position:"relative"},children:(0,s.jsxs)("div",{style:{transform:"translate(".concat(p.left,"px, ").concat(p.top,"px)"),width:a,height:l},onMouseMove:e=>{let t=e.nativeEvent.offsetX,n=e.nativeEvent.offsetY,s=null,r=20;i.forEach(e=>{let i=f(e.x),a=h(e.y),l=Math.sqrt((i-t)**2+(a-n)**2);l<r&&(r=l,s={x:i,y:a})}),c(s)},onMouseLeave:()=>c(null),children:[(0,s.jsx)("canvas",{style:{position:"relative"},ref:m,width:a,height:l}),(0,s.jsxs)("svg",{width:a,height:l,style:{position:"absolute",top:0,left:0,overflow:"visible"},children:[(0,s.jsx)(u,{yScale:h,pixelsPerTick:40,width:a}),(0,s.jsx)("g",{transform:"translate(0, ".concat(l,")"),children:(0,s.jsx)(x,{xScale:f,pixelsPerTick:40,height:l})}),o&&(0,s.jsx)("circle",{cx:o.x,cy:o.y,r:10,fill:"red",opacity:.8})]})]})})},m=e=>{let{width:t=700,height:n=400}=e;return(0,s.jsx)(f,{data:h,width:t,height:n})};var j=n(72182),g=n(41664),v=n.n(g),w=n(3572);function y(){let e=l.Y.find(e=>"/course/canvas/introduction"===e.link);return e?(0,s.jsxs)(a.p,{title:e.name,seoDescription:"",nextTocItem:l.Y.find(e=>"/course/canvas/drawing-shapes-with-canvas"===e.link),previousTocItem:l.Y.find(e=>"/course/animation/project"===e.link),children:[(0,s.jsx)(i.Z,{title:e.name,lessonStatus:e.status,readTime:e.readTime,selectedLesson:e,description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["By now, after completing the previous modules, you’re likely able to draw ",(0,s.jsx)("b",{children:"almost anything"})," on the screen— including interactive elements like tooltips, hover effects, and animations."]}),(0,s.jsxs)("p",{children:["However, there's a significant bottleneck:"," ",(0,s.jsx)(j.b,{children:"performance"}),". Let's explore"," ",(0,s.jsx)("code",{children:"canvas"}),", a rendering engine that can help solve this issue."]})]})}),(0,s.jsx)("h2",{children:"The Problem with SVG"}),(0,s.jsxs)("p",{children:["SVG can be ",(0,s.jsx)("b",{children:"slow"}),"."]}),(0,s.jsxs)("p",{children:["If you’re working with chart types that don’t involve too many elements, like simple ",(0,s.jsx)(v(),{href:"line-chart",children:"line"})," or"," ",(0,s.jsx)(v(),{href:"/barplot",children:"bar"})," charts, SVG will handle them well."]}),(0,s.jsxs)("p",{children:["But if you create a ",(0,s.jsx)(v(),{href:"/scatter-plot",children:"scatterplot"})," with 100,000 data points and layer on complex animations, you’ll likely run into ",(0,s.jsx)("b",{children:"performance troubles"}),"."]}),(0,s.jsxs)("p",{children:["So, ",(0,s.jsx)(j.b,{children:"why is SVG slow?"})]}),(0,s.jsx)("h3",{children:"\uD83D\uDC22 Drawing SVG is CPU-Only"}),(0,s.jsx)("p",{children:"SVG rendering relies entirely on the CPU, with no GPU acceleration."}),(0,s.jsx)("p",{children:"This means every shape, line, or point in an SVG graphic is drawn by the CPU, which can quickly become a bottleneck. Without the benefit of GPU power, rendering large amounts of data or intricate animations can be time-consuming and sluggish."}),(0,s.jsx)("h3",{children:"\uD83C\uDFCB️‍♀️ SVG Creates a Heavy DOM"}),(0,s.jsxs)("p",{children:["Each element you draw in SVG is added as a"," ",(0,s.jsx)("b",{children:"separate line in the DOM"}),"."]}),(0,s.jsxs)("p",{children:["For a large number of elements, this quickly",(0,s.jsx)("b",{children:" bloats the DOM"}),", which your browser has to continuously manage and render."]}),(0,s.jsxs)("p",{children:["Adding event listeners to each element further increases the workload, as the browser must keep track of interactions on all these individual DOM nodes. And as the DOM grows, ",(0,s.jsx)("b",{children:"memory"})," usage rises as well, which can lead to even more slowdowns."]}),(0,s.jsx)("h2",{children:"Example"}),(0,s.jsx)("p",{children:"Here’s a small scatterplot with a few thousand data points and a hover effect that updates an internal state."}),(0,s.jsx)("p",{children:"Hover over it with your mouse. Notice the lag? See how slow it gets?"}),(0,s.jsx)("div",{className:"full-bleed my-4 max-w-7xl mx-auto",children:(0,s.jsx)(c.X,{vizName:"exercise/HoverDeathByStateSolution"})}),(0,s.jsx)("p",{children:(0,s.jsx)("br",{})}),(0,s.jsxs)("p",{children:["With just a few graphs like this in your app, you can quickly reach a million nodes in the DOM \uD83D\uDE48."," "]}),(0,s.jsxs)("p",{children:["When that happens, your entire app—or even the whole browser—can"," ",(0,s.jsx)("b",{children:"start to freeze"})," as it struggles to manage the overwhelming number of elements."]}),(0,s.jsx)("h2",{children:"So,"}),(0,s.jsx)("p",{children:(0,s.jsx)("br",{})}),(0,s.jsx)("blockquote",{className:"bg-fuchsia-50 py-8",children:(0,s.jsxs)("p",{children:["If your graph has a large number of elements or requires heavy animations, it’s best to move away from SVG and choose something more performant, like ",(0,s.jsx)("code",{children:"canvas"}),"."]})})," ",(0,s.jsx)("h2",{children:"⚡️ What is canvas, and why is it fast"}),(0,s.jsxs)("p",{children:["Canvas provides a high-performance, low-level context for drawing 2D graphics, animations, and even simple games, giving you"," ",(0,s.jsx)("b",{children:"pixel-level"})," control for faster rendering, especially with dynamic content or large datasets."]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"canvas"})," is an HTML element! You can create one by writing:"]}),(0,s.jsx)(w.d,{code:"\n<canvas width={300} height={200}/>\n      "}),(0,s.jsx)("p",{children:"Think of it like holding a whiteboard, ready to draw on it—only lightning fast!"}),(0,s.jsx)("h2",{children:"Not convinced?"}),(0,s.jsx)("p",{children:"Check the same sandbox, made in Canvas!"}),(0,s.jsx)(o.$,{vizName:"ScatterplotCanvasHoverEffect",VizComponent:m,height:400,maxWidth:600,caption:"A scatterplot with thousands of point and a fast hover effect."}),(0,s.jsx)("h2",{children:"Looks fun, let’s code!"}),(0,s.jsxs)("p",{children:["Yep, but be ready to ",(0,s.jsx)("b",{children:"learn from scratch"}),"—and to break a sweat!"]}),(0,s.jsxs)("p",{children:["In this module, we’ll dive into how the ",(0,s.jsx)("code",{children:"canvas"})," works, how to use it effectively, and how it can solve performance issues in your web apps."]})]}):null}},45993:function(e){e.exports={codeChunckCopyButton:"code-block_codeChunckCopyButton__yPrL_",copyButtonContainer:"code-block_copyButtonContainer__BrX9E"}}},function(e){e.O(0,[2343,7754,8995,7823,8190,3710,9774,2888,179],function(){return e(e.s=9572)}),_N_E=e.O()}]);